<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Animación Corazón 3D</title>
    <style>
        body { margin: 0; overflow: hidden; background-color: #000; }
        canvas { display: block; }
    </style>
</head>
<body>

<!-- Cargamos Three.js desde CDN -->
<script type="module">
    import * as THREE from 'https://cdn.skypack.dev';

    // 1. Configuración de la Escena
    const scene = new THREE.Scene();
    const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
    const renderer = new THREE.WebGLRenderer({ antialias: true });
    renderer.setSize(window.innerWidth, window.innerHeight);
    document.body.appendChild(renderer.domElement);

    // 2. Crear el Corazón (Geometría basada en la ecuación de MATLAB)
    const points = [];
    for (let x = -1.5; x <= 1.5; x += 0.1) {
        for (let y = -1.5; y <= 1.5; y += 0.1) {
            for (let z = -1.5; z <= 1.5; z += 0.1) {
                // Ecuación matemática del corazón 3D
                const equation = Math.pow(x*x + (9/4)*y*y + z*z - 1, 3) - x*x*Math.pow(z, 3) - (9/80)*y*y*Math.pow(z, 3);
                if (equation <= 0) {
                    points.push(new THREE.Vector3(x, y, z));
                }
            }
        }
    }

    const geometry = new THREE.BufferGeometry().setFromPoints(points);
    const material = new THREE.PointsMaterial({ color: 0xff3366, size: 0.05 });
    const heart = new THREE.Points(geometry, material);
    scene.add(heart);

    // 3. Estrellas de fondo
    const starGeometry = new THREE.BufferGeometry();
    const starVertices = [];
    for (let i = 0; i < 2000; i++) {
        starVertices.push((Math.random() - 0.5) * 50, (Math.random() - 0.5) * 50, (Math.random() - 0.5) * 50);
    }
    starGeometry.setAttribute('position', new THREE.Float32BufferAttribute(starVertices, 3));
    const starMaterial = new THREE.PointsMaterial({ color: 0xffffff, size: 0.1 });
    const stars = new THREE.Points(starGeometry, starMaterial);
    scene.add(stars);

    camera.position.z = 4;

    // 4. Animación
    let t = 0;
    function animate() {
        requestAnimationFrame(animate);
        t += 0.02;

        // Rotación
        heart.rotation.y = t * 0.5;
        
        // Latido (Efecto escala)
        const scale = 1 + 0.1 * Math.sin(t * 4);
        heart.scale.set(scale, scale, scale);

        // Movimiento de estrellas
        stars.rotation.y -= 0.001;

        renderer.render(scene, camera);
    }

    // Ajuste de ventana
    window.addEventListener('resize', () => {
        camera.aspect = window.innerWidth / window.innerHeight;
        camera.updateProjectionMatrix();
        renderer.setSize(window.innerWidth, window.innerHeight);
    });

    animate();
</script>
</body>
</html>
